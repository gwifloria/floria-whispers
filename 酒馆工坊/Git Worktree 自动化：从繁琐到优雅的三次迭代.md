---
status: idea
type: å·¥åŠ
language: å¾…å®š
created: {{date:YYYY-MM-DD}}
updated: {{date:YYYY-MM-DD}}
tags:
  - 
---

## ç—›ç‚¹

åœ¨ç ”ç©¶ ClaudeCode æœ€ä½³å®è·µä¸­ï¼Œæˆ‘çŸ¥é“äº†Git Worktree å’Œä»–ç»“åˆå¯ä»¥æå¤§è°ƒåŠ¨ AI çš„èƒ½åŠ›ã€‚ä½†åœ¨ Turborepo é¡¹ç›®ä¸­ä½¿ç”¨æ—¶é‡åˆ°äº†ä¸¤ä¸ªçƒ¦äººçš„é—®é¢˜ï¼š

**1. å‘½ä»¤å¤ªé•¿**

```bash
git worktree add ../wonderland-nexus-feature-a -b feature-a
```

æ¯æ¬¡éƒ½è¦æ•²é¡¹ç›®åã€åˆ†æ”¯åï¼Œé‡å¤ä¸”æ˜“é”™ã€‚

**2. .env.local ä¸ä¼šè‡ªåŠ¨åŒæ­¥**

Worktree æ˜¯ç‹¬ç«‹ç›®å½•ï¼Œè€Œ `.env.local` è¢« gitignore å¿½ç•¥ã€‚é¡¹ç›®å¯åŠ¨ä¾èµ–è¿™äº›ç¯å¢ƒå˜é‡ï¼Œæ¯æ¬¡æ–°å»º worktree éƒ½è¦æ‰‹åŠ¨å¤åˆ¶ä¸‰ä¸ªä½ç½®çš„é…ç½®æ–‡ä»¶ï¼š

- `/.env.local`
- `/apps/web/.env.local`
- `/apps/api/.env.local`

ä¸ºäº†è¿™ç‚¹éº»çƒ¦æ”¾å¼ƒ worktree å¤ªå¯æƒœï¼Œäºæ˜¯è®© Claude å¸®æˆ‘è¿­ä»£äº†ä¸‰ä¸ªç‰ˆæœ¬ã€‚

---

## V1ï¼šè‡ªåŠ¨åŒæ­¥ .env.local

æ ¸å¿ƒæ˜¯ä¸€ä¸ª shell è„šæœ¬ + git aliasã€‚

**è„šæœ¬** (`scripts/sync-env-to-worktree.sh`)ï¼šè‡ªåŠ¨æ£€æµ‹ä¸» worktreeï¼ŒæŠŠæ‰€æœ‰ `.env.local` å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•ã€‚

**Git Alias**ï¼šæŠŠ `git worktree add` å’ŒåŒæ­¥è„šæœ¬ä¸²èµ·æ¥ï¼š

```bash
git wt ../wonderland-nexus-feature feature-branch
# åˆ›å»º worktree åè‡ªåŠ¨åŒæ­¥ç¯å¢ƒå˜é‡
```

è§£å†³äº†æ‰‹åŠ¨å¤åˆ¶çš„é—®é¢˜ï¼Œä½†å‘½ä»¤è¿˜æ˜¯å¾ˆé•¿ã€‚

---

## V2ï¼šç®€åŒ–å‘½ä»¤

è§‚å¯Ÿå‘ç°ï¼šworktree è·¯å¾„é€šå¸¸æ˜¯ `../project-name-{åˆ†æ”¯å}`ï¼Œåˆ†æ”¯åè¦æ•²ä¸¤éã€‚

ä¼˜åŒ–ååªéœ€è¾“å…¥åˆ†æ”¯åï¼š

```bash
git wt feat-xxx
# è‡ªåŠ¨æ¨æ–­è·¯å¾„ï¼š../wonderland-nexus-feat-xxx
# è‡ªåŠ¨åˆ›å»ºåˆ†æ”¯ï¼š-b feat-xxx
# è‡ªåŠ¨åŒæ­¥ .env.local
```

è¾“å…¥é‡å‡å°‘ 70%ï¼ŒåŒæ—¶ä¿ç•™å®Œæ•´æ¨¡å¼çš„å…¼å®¹æ€§ã€‚

---

## V3ï¼šæ”¯æŒåˆ†æ”¯å `/` åˆ†éš”

æˆ‘å¶å°”ç”¨ Git GUI å·¥å…·ï¼Œå‘ç°åˆ†æ”¯åç”¨ `/` åˆ†éš”æ—¶ï¼ˆå¦‚ `feat/xxx`ï¼‰ä¼šè‡ªåŠ¨åˆ†ç»„æ˜¾ç¤ºæˆæ–‡ä»¶å¤¹ç»“æ„ï¼Œå¾ˆæ¸…æ™°ï¼š

```
ğŸ“ feat
  â”œâ”€ like-button
  â””â”€ share-feature
ğŸ“ fix
  â””â”€ navbar-bug
```

ä½† `/` ç›´æ¥ç”¨åœ¨æ–‡ä»¶è·¯å¾„é‡Œä¼šå‡ºé—®é¢˜ã€‚

**æœ€ç»ˆæ–¹æ¡ˆ**ï¼šåˆ†æ”¯åä¿ç•™ `/`ï¼Œè·¯å¾„è‡ªåŠ¨è½¬æ¢ä¸º `-`

```bash
git wt feat/like-button
# Git åˆ†æ”¯ï¼šfeat/like-buttonï¼ˆGUI ä¸­åˆ†ç»„æ˜¾ç¤ºï¼‰
# Worktree è·¯å¾„ï¼š../wonderland-nexus-feat-like-buttonï¼ˆæ–‡ä»¶ç³»ç»Ÿå‹å¥½ï¼‰
```

---

## æœ€ç»ˆæ•ˆæœ

```bash
# æ—¥å¸¸ä½¿ç”¨
git wt feat/new-feature    # ä¸€ä¸ªå‚æ•°æå®šä¸€åˆ‡

# ç‰¹æ®Šéœ€æ±‚
git wt ~/custom-path -b branch  # å®Œæ•´æ¨¡å¼ä»ç„¶å¯ç”¨

# è¡¥æ•‘æªæ–½
yarn sync-env ../some-worktree  # æ‰‹åŠ¨åŒæ­¥
```

ä¸‰æ¬¡è¿­ä»£ï¼Œä»ã€Œèƒ½ç”¨ã€åˆ°ã€Œå¥½ç”¨ã€ã€‚å°å·¥å…·ï¼Œå¤§å¹¸ç¦ã€‚